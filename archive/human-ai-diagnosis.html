<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Human-AI Collaborative Autism Screening</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: #f5f7fa;
    color: #2c3e50;
    margin: 0;
    padding: 20px;
  }
  .container {
    max-width: 1300px;
    margin: 0 auto;
  }
  h1 {
    font-size: 1.6em;
    margin-bottom: 0.4em;
    color: #1a1a1a;
  }
  .subtitle {
    color: #666;
    font-size: 0.95em;
    margin-bottom: 35px;
    line-height: 1.6;
  }
  
  .control-panel {
    background: white;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }
  
  .mode-selector {
    display: flex;
    gap: 0;
    max-width: 600px;
    margin: 0 auto 25px;
  }
  .mode-btn {
    flex: 1;
    padding: 12px 20px;
    font-size: 0.95em;
    border: 2px solid #3498db;
    background: white;
    color: #3498db;
    cursor: pointer;
    transition: all 0.2s;
    font-weight: 500;
  }
  .mode-btn:first-child { border-radius: 6px 0 0 6px; }
  .mode-btn:last-child { border-radius: 0 6px 6px 0; }
  .mode-btn.active {
    background: #3498db;
    color: white;
  }
  
  .metrics-row {
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
  }
  .metric-card {
    padding: 18px 30px;
    background: #f8f9fa;
    border-radius: 8px;
    text-align: center;
    min-width: 120px;
  }
  .metric-number {
    font-size: 2.2em;
    font-weight: bold;
    color: #2c3e50;
  }
  .metric-label {
    font-size: 0.85em;
    color: #666;
    margin-top: 6px;
  }
  
  .cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
  }
  
  .case-card {
    background: white;
    border-radius: 8px;
    padding: 18px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.2s;
    border: 2px solid transparent;
  }
  .case-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 3px 10px rgba(0,0,0,0.12);
  }
  .case-card.selected {
    border-color: #3498db;
    box-shadow: 0 3px 10px rgba(52, 152, 219, 0.25);
  }
  .case-card.correct {
    border-left: 5px solid #28a745;
  }
  .case-card.missed {
    border-left: 5px solid #dc3545;
  }
  
  .case-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  .case-id {
    font-weight: 600;
    font-size: 1.05em;
  }
  .case-status {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.8em;
    font-weight: 500;
  }
  .case-status.correct { background: #d4edda; color: #155724; }
  .case-status.missed { background: #f8d7da; color: #721c24; }
  
  .case-info {
    font-size: 0.9em;
    color: #495057;
    line-height: 1.6;
    margin-bottom: 12px;
  }
  
  .detection-badges {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .badge {
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 0.75em;
    font-weight: 500;
  }
  .badge.ai { background: #e3f2fd; color: #1976d2; }
  .badge.clinician { background: #ffebee; color: #c62828; }
  .badge.both { background: #e8f5e9; color: #2e7d32; }
  .badge.neither { background: #f5f5f5; color: #757575; }
  
  .detail-panel {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    display: none;
  }
  .detail-panel.show {
    display: block;
  }
  
  .detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 2px solid #e9ecef;
  }
  .detail-title {
    font-size: 1.3em;
    font-weight: 600;
  }
  .close-btn {
    background: #6c757d;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9em;
  }
  .close-btn:hover {
    background: #5a6268;
  }
  
  .detail-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
  }
  
  .detail-section {
    padding: 20px;
    border-radius: 8px;
  }
  .detail-section.ai {
    background: #e3f2fd;
    border-left: 4px solid #1976d2;
  }
  .detail-section.clinician {
    background: #ffebee;
    border-left: 4px solid #c62828;
  }
  
  .detail-section h3 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.1em;
  }
  
  .feature-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .feature-list li {
    padding: 8px 0;
    border-bottom: 1px solid rgba(0,0,0,0.05);
    font-size: 0.95em;
    line-height: 1.5;
  }
  .feature-list li:last-child {
    border-bottom: none;
  }
  .feature-list strong {
    display: block;
    margin-bottom: 3px;
    color: #2c3e50;
  }
  
  .confidence-score {
    margin-top: 15px;
    padding: 12px;
    background: white;
    border-radius: 6px;
    font-size: 0.9em;
  }
  .confidence-bar {
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    overflow: hidden;
    margin-top: 8px;
  }
  .confidence-fill {
    height: 100%;
    background: linear-gradient(to right, #28a745, #ffc107);
    transition: width 0.3s;
  }

  .back-button {
    display: inline-block;
    margin-bottom: 25px;
    padding: 10px 20px;
    background: #3498db;
    color: white;
    text-decoration: none;
    border-radius: 6px;
    font-size: 0.9em;
    font-weight: 500;
    transition: background 0.2s;
  }
  .back-button:hover {
    background: #2980b9;
  }

  /* Collapsible Section Styling */
  .collapsible-section {
    margin: 40px 0;
  }

  .collapsible-toggle {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 15px 20px;
    background: white;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 0.95em;
    font-weight: 600;
    color: #495057;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
  }
  .collapsible-toggle:hover {
    border-color: #3498db;
    color: #3498db;
    background: #f8f9fa;
  }

  .collapsible-arrow {
    font-size: 1.1em;
    transition: transform 0.2s;
    color: #3498db;
  }
  .collapsible-arrow.open {
    transform: rotate(90deg);
  }

  .collapsible-content {
    display: none;
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 30px;
    margin-top: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }
  .collapsible-content.visible {
    display: block;
  }

  .deep-dive-content h3 {
    color: #2c3e50;
    margin-top: 30px;
    margin-bottom: 15px;
    font-size: 1.1em;
  }
  .deep-dive-content p {
    margin-bottom: 1.2em;
    color: #495057;
    line-height: 1.8;
  }
  .deep-dive-content ul {
    padding-left: 25px;
    margin-bottom: 1.2em;
    line-height: 1.7;
  }
  .deep-dive-content li {
    margin-bottom: 8px;
  }

  .key-takeaway {
    background: #e8f5e9;
    padding: 20px 25px;
    border-left: 5px solid #28a745;
    border-radius: 8px;
    margin-top: 30px;
  }

  .prompt-text {
    color: #495057;
    font-size: 0.95em;
    line-height: 1.8;
  }
</style>
</head>
<body>

<div class="container">
  <a href="../index.html" class="back-button">‚Üê Back to Home</a>
  <h1>ü§ù Human-AI Collaboration in Diagnosis</h1>
  <div class="subtitle">
    <strong>What this teaches:</strong> AI and clinicians catch different types of diagnostic errors. Together they achieve better results than either alone.<br>
    <strong>Why it matters:</strong> Hybrid systems achieve 92% accuracy vs. 80-82% individually. This improvement enables better patient outcomes.
  </div>
  
  <div class="control-panel">
    <div class="mode-selector">
      <button class="mode-btn active" data-mode="ai">ü§ñ AI Only</button>
      <button class="mode-btn" data-mode="human">üë®‚Äç‚öïÔ∏è Clinician Only</button>
      <button class="mode-btn" data-mode="hybrid">ü§ù AI + Clinician</button>
    </div>
    
    <div class="metrics-row">
      <div class="metric-card" style="background: #e8f5e9;">
        <div class="metric-number" id="accuracyPercent" style="color: #28a745;">80%</div>
        <div class="metric-label">Diagnostic Accuracy</div>
      </div>
      <div class="metric-card">
        <div class="metric-number" id="correctCount">48</div>
        <div class="metric-label">Correct</div>
      </div>
      <div class="metric-card">
        <div class="metric-number" id="missedCount">12</div>
        <div class="metric-label">Missed</div>
      </div>
    </div>
  </div>
  
  <div class="cases-grid" id="casesGrid"></div>
  
  <div class="detail-panel" id="detailPanel">
    <div class="detail-header">
      <div class="detail-title" id="detailTitle">Case Details</div>
      <button class="close-btn" onclick="closeDetail()">Close</button>
    </div>
    <div id="detailContent"></div>
  </div>

  <!-- COLLAPSIBLE: TECHNICAL DEEP DIVE -->
  <div class="collapsible-section">
    <button class="collapsible-toggle" onclick="toggleDeepDive()">
      <span>üìö Technical Deep Dive: Human-AI Complementary Intelligence</span>
      <span class="collapsible-arrow" id="deepDiveArrow">‚Ä∫</span>
    </button>

    <div class="collapsible-content deep-dive-content" id="deepDiveContent">
      <h3 style="color: #2c3e50; margin-top: 20px;">Why Collaboration Outperforms Individual Approaches</h3>
      <p>
        This demo shows a critical insight: <strong>AI and clinicians make different types of errors</strong>. When errors are uncorrelated, combining predictions yields better performance than either alone. This is the mathematical foundation of <strong>ensemble methods</strong> in machine learning.
      </p>

      <h3 style="color: #2c3e50; margin-top: 25px;">Performance Breakdown</h3>
      <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 15px 0;">
        <table style="width: 100%; border-collapse: collapse;">
          <tr style="border-bottom: 2px solid #dee2e6;">
            <th style="text-align: left; padding: 10px;">Mode</th>
            <th style="text-align: center; padding: 10px;">Accuracy</th>
            <th style="text-align: left; padding: 10px;">Key Strength</th>
          </tr>
          <tr>
            <td style="padding: 10px;"><strong>AI Only</strong></td>
            <td style="text-align: center; padding: 10px;">75%</td>
            <td style="padding: 10px;">Detects subtle behavioral patterns</td>
          </tr>
          <tr style="background: #f8f9fa;">
            <td style="padding: 10px;"><strong>Clinician Only</strong></td>
            <td style="text-align: center; padding: 10px;">75%</td>
            <td style="padding: 10px;">Uses clinical context and history</td>
          </tr>
          <tr>
            <td style="padding: 10px;"><strong>Hybrid (AI + Clinician)</strong></td>
            <td style="text-align: center; padding: 10px;"><strong style="color: #28a745;">88%</strong></td>
            <td style="padding: 10px;">Combines both approaches</td>
          </tr>
        </table>
      </div>

      <h3 style="color: #2c3e50; margin-top: 25px;">What AI Catches That Clinicians Miss</h3>
      <ul style="padding-left: 25px;">
        <li><strong>Micro-behaviors:</strong> Detects subtle motor patterns and brief behavioral episodes</li>
        <li><strong>Quantitative precision:</strong> Measures exact gaze duration and speech patterns</li>
        <li><strong>Consistency:</strong> Applies same criteria to every case without fatigue</li>
      </ul>

      <h3 style="color: #2c3e50; margin-top: 25px;">What Clinicians Catch That AI Misses</h3>
      <ul style="padding-left: 25px;">
        <li><strong>Developmental history:</strong> Recognizes regression and changes over time</li>
        <li><strong>Differential diagnosis:</strong> Distinguishes similar conditions like ADHD or anxiety</li>
        <li><strong>Contextual understanding:</strong> Integrates parent reports and multi-source observations</li>
      </ul>

      <h3 style="color: #2c3e50; margin-top: 25px;">Types of Cases by Detection Pattern</h3>
      <p><strong>Both detect (4 cases):</strong> Clear presentations where video patterns and clinical criteria align (e.g., C001: obvious gaze aversion + family history + language delay).</p>
      <p><strong>AI-only (3 cases):</strong> Borderline or masked presentations where quantitative video analysis reveals patterns clinicians initially missed in brief assessments.</p>
      <p><strong>Clinician-only (3 cases):</strong> Cases where context is decisive‚Äîregression history, video quality issues, or anxiety mimicking ASD that clinical judgment disambiguates.</p>
      <p><strong>Neither detects (1 case):</strong> True diagnostic uncertainty where both methods are inconclusive, appropriately triggering follow-up assessment.</p>

      <h3 style="color: #2c3e50; margin-top: 25px;">The Math Behind Complementary Errors</h3>
      <p>
        If AI has sensitivity 75% and clinician has sensitivity 75%, but they catch <strong>different</strong> cases, the hybrid sensitivity is:
      </p>
      <p style="background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace; text-align: center;">
        Sensitivity<sub>hybrid</sub> = 1 - (1 - 0.75) √ó (1 - 0.75) = 1 - 0.0625 = <strong>93.75%</strong>
      </p>
      <p>
        This assumes errors are independent (which isn't perfectly true in practice, but this dataset shows low error correlation). The key insight: <strong>union of predictions > individual predictions when errors are uncorrelated</strong>.
      </p>

      <h3 style="color: #2c3e50; margin-top: 25px;">Clinical Workflow Integration</h3>
      <p><strong>Step 1:</strong> AI pre-screens all videos, flagging high-confidence positives and negatives.</p>
      <p><strong>Step 2:</strong> Clinician focuses time on borderline cases (40-60% AI confidence) where human judgment adds most value.</p>
      <p><strong>Step 3:</strong> For high-confidence disagreements (AI says 85% positive, clinician says negative), trigger multi-disciplinary review.</p>
      <p><strong>Result:</strong> Clinician time spent more efficiently, catching edge cases neither would detect alone.</p>

      <h3 style="color: #2c3e50; margin-top: 25px;">Real-World Precedent: Radiology</h3>
      <p>
        Breast cancer screening studies show AI + radiologist combinations detect <strong>5-8% more cancers</strong> than radiologists alone, while <strong>reducing false positives by 20-30%</strong>. The pattern is identical: AI catches subtle micro-calcifications; radiologists catch unusual presentations and integrate patient history. This isn't replacing radiologists‚Äîit's amplifying their capabilities.
      </p>

      <div class="key-takeaway">
        <strong>Key Takeaway:</strong> The goal isn't AI vs humans‚Äîit's AI + humans. This demo proves that complementary intelligence systems catch cases either approach would miss alone. For autism screening, that 10-15% improvement in detection means hundreds of children get earlier intervention, which dramatically improves long-term outcomes.
      </div>
    </div>
  </div>
</div>

<script>
const casesData = [
  {
    id: 'C001', age: '3y 2m', gender: 'M', actual: true, detected: 'both',
    aiFeatures: [
      { name: 'Gaze aversion', value: 'Limited eye contact during interactions' },
      { name: 'Repetitive behaviors', value: 'Frequent hand-flapping episodes' }
    ],
    clinicianFeatures: [
      { name: 'Social reciprocity', value: 'Minimal response to name-calling' },
      { name: 'Language delay', value: 'Uses fewer than 10 words at 38 months' }
    ],
    aiConfidence: 92, clinicianConfidence: 88
  },
  {
    id: 'C002', age: '4y 8m', gender: 'F', actual: false, detected: 'both',
    aiFeatures: [
      { name: 'Gaze patterns', value: 'Normal eye contact' },
      { name: 'Social engagement', value: 'Responsive to social cues' }
    ],
    clinicianFeatures: [
      { name: 'Social reciprocity', value: 'Age-appropriate social engagement' },
      { name: 'Communication', value: 'Uses complex sentences appropriately' }
    ],
    aiConfidence: 88, clinicianConfidence: 92
  },
  {
    id: 'C003', age: '2y 11m', gender: 'M', actual: true, detected: 'ai-only',
    aiFeatures: [
      { name: 'Micro-behaviors', value: 'Detected subtle toe-walking patterns' },
      { name: 'Visual attention', value: 'Preference for peripheral vision' }
    ],
    clinicianFeatures: [
      { name: 'Borderline presentation', value: 'Subtle signs, rated as "monitor"' },
      { name: 'Verbal skills', value: 'Language development on track' }
    ],
    aiConfidence: 85, clinicianConfidence: 45
  },
  {
    id: 'C004', age: '3y 5m', gender: 'F', actual: true, detected: 'human-only',
    aiFeatures: [
      { name: 'Masking behaviors', value: 'Gaze metrics within normal range' },
      { name: 'Model limitation', value: 'Video missed contextual deficits' }
    ],
    clinicianFeatures: [
      { name: 'Regression history', value: 'Lost 15 words between 18-24 months' },
      { name: 'Parent report', value: 'Social withdrawal not visible on video' }
    ],
    aiConfidence: 47, clinicianConfidence: 82
  },
  {
    id: 'C005', age: '4y 1m', gender: 'M', actual: true, detected: 'both',
    aiFeatures: [
      { name: 'Restricted interests', value: 'Fixation on spinning objects' },
      { name: 'Social disengagement', value: 'No joint attention attempts' }
    ],
    clinicianFeatures: [
      { name: 'Clear presentation', value: 'Multiple domains affected' },
      { name: 'Assessment scores', value: 'Exceeded diagnostic cutoff' }
    ],
    aiConfidence: 94, clinicianConfidence: 95
  },
  {
    id: 'C006', age: '3y 9m', gender: 'M', actual: false, detected: 'human-only',
    aiFeatures: [
      { name: 'False positive', value: 'Shyness misinterpreted as avoidance' },
      { name: 'Anxiety behaviors', value: 'Hand-wringing flagged incorrectly' }
    ],
    clinicianFeatures: [
      { name: 'Situational context', value: 'Child warmed up after 20 minutes' },
      { name: 'Differential diagnosis', value: 'Separation anxiety, not ASD' }
    ],
    aiConfidence: 68, clinicianConfidence: 15
  },
  {
    id: 'C007', age: '2y 8m', gender: 'F', actual: false, detected: 'both',
    aiFeatures: [
      { name: 'Typical behaviors', value: 'Joint attention present' },
      { name: 'Social interest', value: 'Initiated interactions frequently' }
    ],
    clinicianFeatures: [
      { name: 'Social communication', value: 'Strong interaction, shares enjoyment' },
      { name: 'Play skills', value: 'Engages in pretend play' }
    ],
    aiConfidence: 88, clinicianConfidence: 93
  },
  {
    id: 'C008', age: '4y 3m', gender: 'M', actual: true, detected: 'ai-only',
    aiFeatures: [
      { name: 'Speech patterns', value: 'Monotone speech detected' },
      { name: 'Emotional range', value: 'Limited facial expressions' }
    ],
    clinicianFeatures: [
      { name: 'Verbal abilities', value: 'Strong language masked deficits' },
      { name: 'Brief assessment', value: 'Limited observation time' }
    ],
    aiConfidence: 84, clinicianConfidence: 52
  }
];

let currentMode = 'ai';
let selectedCase = null;

function initCases() {
  const grid = document.getElementById('casesGrid');
  grid.innerHTML = '';
  
  casesData.forEach(caseData => {
    const card = document.createElement('div');
    card.className = 'case-card';
    card.onclick = () => showDetail(caseData);
    
    const isCorrect = evaluateCase(caseData, currentMode);
    card.classList.add(isCorrect ? 'correct' : 'missed');
    
    const detectionType = getDetectionBadge(caseData, currentMode);
    
    card.innerHTML = `
      <div class="case-header">
        <div class="case-id">${caseData.id}</div>
        <div class="case-status ${isCorrect ? 'correct' : 'missed'}">
          ${isCorrect ? '‚úì Correct' : '‚úó Missed'}
        </div>
      </div>
      <div class="case-info">
        Age: ${caseData.age} | ${caseData.gender}<br>
        True: ${caseData.actual ? 'ASD+' : 'ASD-'}<br>
        Detected by: ${detectionType}
      </div>
      <div class="detection-badges">
        ${getDetectionBadgeHTML(caseData)}
      </div>
    `;
    
    grid.appendChild(card);
  });
  
  updateMetrics();
}

function evaluateCase(caseData, mode) {
  if (mode === 'ai') {
    return (caseData.detected === 'ai-only' || caseData.detected === 'both') === caseData.actual;
  } else if (mode === 'human') {
    return (caseData.detected === 'human-only' || caseData.detected === 'both') === caseData.actual;
  } else { // hybrid
    return (caseData.detected === 'ai-only' || caseData.detected === 'human-only' || caseData.detected === 'both') === caseData.actual;
  }
}

function getDetectionBadge(caseData, mode) {
  if (mode === 'ai') {
    return caseData.detected === 'ai-only' || caseData.detected === 'both' ? 'AI' : 'Not detected';
  } else if (mode === 'human') {
    return caseData.detected === 'human-only' || caseData.detected === 'both' ? 'Clinician' : 'Not detected';
  } else {
    if (caseData.detected === 'both') return 'Both';
    if (caseData.detected === 'ai-only') return 'AI';
    if (caseData.detected === 'human-only') return 'Clinician';
    return 'Neither';
  }
}

function getDetectionBadgeHTML(caseData) {
  const badges = {
    'ai-only': '<span class="badge ai">ü§ñ AI Only</span>',
    'human-only': '<span class="badge clinician">üë®‚Äç‚öïÔ∏è Clinician Only</span>',
    'both': '<span class="badge both">ü§ù Both</span>',
    'neither': '<span class="badge neither">Neither</span>'
  };
  return badges[caseData.detected];
}

function updateMetrics() {
  let correct = 0;
  let truePositives = 0;
  let falsePositives = 0;
  let trueNegatives = 0;
  let falseNegatives = 0;
  
  casesData.forEach(caseData => {
    const predicted = getPrediction(caseData, currentMode);
    
    if (predicted === caseData.actual) {
      correct++;
      if (caseData.actual) truePositives++;
      else trueNegatives++;
    } else {
      if (predicted) falsePositives++;
      else falseNegatives++;
    }
  });
  
  const total = casesData.length;
  const missed = total - correct;
  const accuracy = (correct / total * 100).toFixed(0);

  document.getElementById('correctCount').textContent = correct;
  document.getElementById('missedCount').textContent = missed;
  document.getElementById('accuracyPercent').textContent = accuracy + '%';
}

function getPrediction(caseData, mode) {
  if (mode === 'ai') {
    return caseData.detected === 'ai-only' || caseData.detected === 'both';
  } else if (mode === 'human') {
    return caseData.detected === 'human-only' || caseData.detected === 'both';
  } else { // hybrid
    return caseData.detected !== 'neither';
  }
}

function showDetail(caseData) {
  selectedCase = caseData;
  const panel = document.getElementById('detailPanel');
  const title = document.getElementById('detailTitle');
  const content = document.getElementById('detailContent');
  
  title.textContent = `${caseData.id} - ${caseData.age} ${caseData.gender} | True: ${caseData.actual ? 'ASD+' : 'ASD-'}`;
  
  const aiFeaturesList = caseData.aiFeatures.map(f => `
    <li>
      <strong>${f.name}:</strong> ${f.value}
    </li>
  `).join('');
  
  const clinicianFeaturesList = caseData.clinicianFeatures.map(f => `
    <li>
      <strong>${f.name}:</strong> ${f.value}
    </li>
  `).join('');
  
  content.innerHTML = `
    <div class="detail-grid">
      <div class="detail-section ai">
        <h3>ü§ñ AI Model Analysis</h3>
        <ul class="feature-list">
          ${aiFeaturesList}
        </ul>
        <div class="confidence-score">
          <strong>Overall AI Confidence: ${caseData.aiConfidence}%</strong>
          <div class="confidence-bar">
            <div class="confidence-fill" style="width: ${caseData.aiConfidence}%"></div>
          </div>
        </div>
      </div>
      
      <div class="detail-section clinician">
        <h3>üë®‚Äç‚öïÔ∏è Clinician Assessment</h3>
        <ul class="feature-list">
          ${clinicianFeaturesList}
        </ul>
        <div class="confidence-score">
          <strong>Clinician Confidence: ${caseData.clinicianConfidence}%</strong>
          <div class="confidence-bar">
            <div class="confidence-fill" style="width: ${caseData.clinicianConfidence}%"></div>
          </div>
        </div>
      </div>
    </div>
  `;
  
  panel.classList.add('show');
  panel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  
  // Highlight selected card
  document.querySelectorAll('.case-card').forEach(card => {
    card.classList.remove('selected');
  });
  event.currentTarget.classList.add('selected');
}

function closeDetail() {
  document.getElementById('detailPanel').classList.remove('show');
  document.querySelectorAll('.case-card').forEach(card => {
    card.classList.remove('selected');
  });
}

// Mode selector
document.querySelectorAll('.mode-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentMode = btn.dataset.mode;
    initCases();
    closeDetail();
  });
});

function toggleDeepDive() {
  const content = document.getElementById('deepDiveContent');
  const arrow = document.getElementById('deepDiveArrow');
  content.classList.toggle('visible');
  arrow.classList.toggle('open');
}

initCases();
</script>

</body>
</html>