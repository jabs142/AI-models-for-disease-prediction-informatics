<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Human-AI Collaborative Autism Screening</title>
<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: #f5f7fa;
    color: #2c3e50;
    margin: 0;
    padding: 20px;
  }
  .container {
    max-width: 1300px;
    margin: 0 auto;
  }
  h1 { 
    font-size: 1.6em; 
    margin-bottom: 0.3em;
    color: #1a1a1a;
  }
  .subtitle {
    color: #666;
    font-size: 0.95em;
    margin-bottom: 30px;
  }
  
  .control-panel {
    background: white;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 20px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
  }
  
  .mode-selector {
    display: flex;
    gap: 0;
    max-width: 600px;
    margin: 0 auto 25px;
  }
  .mode-btn {
    flex: 1;
    padding: 15px 25px;
    font-size: 1em;
    border: 2px solid #3498db;
    background: white;
    color: #3498db;
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 500;
  }
  .mode-btn:first-child { border-radius: 8px 0 0 8px; }
  .mode-btn:last-child { border-radius: 0 8px 8px 0; }
  .mode-btn.active {
    background: #3498db;
    color: white;
  }
  
  .metrics-row {
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
  }
  .metric-card {
    padding: 20px 35px;
    background: #f8f9fa;
    border-radius: 10px;
    text-align: center;
    min-width: 140px;
  }
  .metric-number {
    font-size: 2.5em;
    font-weight: bold;
    color: #2c3e50;
  }
  .metric-label {
    font-size: 0.9em;
    color: #666;
    margin-top: 5px;
  }
  
  .cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
  }
  
  .case-card {
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    cursor: pointer;
    transition: all 0.3s;
    border: 2px solid transparent;
  }
  .case-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
  }
  .case-card.selected {
    border-color: #3498db;
    box-shadow: 0 4px 16px rgba(52, 152, 219, 0.3);
  }
  .case-card.correct {
    border-left: 5px solid #28a745;
  }
  .case-card.missed {
    border-left: 5px solid #dc3545;
  }
  
  .case-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  .case-id {
    font-weight: 600;
    font-size: 1.05em;
  }
  .case-status {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.8em;
    font-weight: 500;
  }
  .case-status.correct { background: #d4edda; color: #155724; }
  .case-status.missed { background: #f8d7da; color: #721c24; }
  
  .case-info {
    font-size: 0.9em;
    color: #495057;
    line-height: 1.6;
    margin-bottom: 12px;
  }
  
  .detection-badges {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .badge {
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 0.75em;
    font-weight: 500;
  }
  .badge.ai { background: #e3f2fd; color: #1976d2; }
  .badge.clinician { background: #ffebee; color: #c62828; }
  .badge.both { background: #e8f5e9; color: #2e7d32; }
  .badge.neither { background: #f5f5f5; color: #757575; }
  
  .detail-panel {
    background: white;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    display: none;
  }
  .detail-panel.show {
    display: block;
  }
  
  .detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 2px solid #e9ecef;
  }
  .detail-title {
    font-size: 1.3em;
    font-weight: 600;
  }
  .close-btn {
    background: #6c757d;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9em;
  }
  .close-btn:hover {
    background: #5a6268;
  }
  
  .detail-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
  }
  
  .detail-section {
    padding: 20px;
    border-radius: 8px;
  }
  .detail-section.ai {
    background: #e3f2fd;
    border-left: 4px solid #1976d2;
  }
  .detail-section.clinician {
    background: #ffebee;
    border-left: 4px solid #c62828;
  }
  
  .detail-section h3 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.1em;
  }
  
  .feature-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .feature-list li {
    padding: 8px 0;
    border-bottom: 1px solid rgba(0,0,0,0.05);
    font-size: 0.95em;
    line-height: 1.5;
  }
  .feature-list li:last-child {
    border-bottom: none;
  }
  .feature-list strong {
    display: block;
    margin-bottom: 3px;
    color: #2c3e50;
  }
  
  .confidence-score {
    margin-top: 15px;
    padding: 12px;
    background: white;
    border-radius: 6px;
    font-size: 0.9em;
  }
  .confidence-bar {
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    overflow: hidden;
    margin-top: 8px;
  }
  .confidence-fill {
    height: 100%;
    background: linear-gradient(to right, #28a745, #ffc107);
    transition: width 0.3s;
  }
</style>
</head>
<body>

<div class="container">
  <h1>ü§ù Human-AI Collaborative Autism Screening Study</h1>
  <div class="subtitle">
    <strong>What I'm building:</strong> A comparison tool showing how AI and clinicians catch different types of diagnostic errors when working alone versus together.<br>
    <strong>What it teaches:</strong> AI excels at pattern detection across thousands of cases; clinicians excel at contextual understanding and edge cases‚Äîneither replaces the other.<br>
    <strong>Why it matters for healthcare:</strong> This demonstrates why "AI replacing doctors" is the wrong question. The right question is: how can they work together to catch cases that either would miss alone?
    <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #dee2e6; font-size: 0.9em; opacity: 0.8;">
      Dataset: 60 children (ages 2-5) | AI: Video behavior analysis model | Clinicians: Board-certified developmental pediatricians
    </div>
  </div>
  
  <div class="control-panel">
    <div class="mode-selector">
      <button class="mode-btn active" data-mode="ai">ü§ñ AI Only</button>
      <button class="mode-btn" data-mode="human">üë®‚Äç‚öïÔ∏è Clinician Only</button>
      <button class="mode-btn" data-mode="hybrid">ü§ù AI + Clinician</button>
    </div>
    
    <div class="metrics-row">
      <div class="metric-card">
        <div class="metric-number" id="correctCount">48</div>
        <div class="metric-label">Correct Diagnoses</div>
      </div>
      <div class="metric-card">
        <div class="metric-number" id="missedCount">12</div>
        <div class="metric-label">Missed Cases</div>
      </div>
      <div class="metric-card" style="background: #e8f5e9;">
        <div class="metric-number" id="accuracyPercent" style="color: #28a745;">80%</div>
        <div class="metric-label">Diagnostic Accuracy</div>
      </div>
      <div class="metric-card">
        <div class="metric-number" id="sensitivityPercent">75%</div>
        <div class="metric-label">Sensitivity</div>
      </div>
      <div class="metric-card">
        <div class="metric-number" id="specificityPercent">84%</div>
        <div class="metric-label">Specificity</div>
      </div>
    </div>
  </div>
  
  <div class="cases-grid" id="casesGrid"></div>
  
  <div class="detail-panel" id="detailPanel">
    <div class="detail-header">
      <div class="detail-title" id="detailTitle">Case Details</div>
      <button class="close-btn" onclick="closeDetail()">Close</button>
    </div>
    <div id="detailContent"></div>
  </div>

  <!-- Technical Deep Dive Section -->
  <div style="max-width: 1300px; margin: 30px auto; background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); border-top: 4px solid #3498db;">
    <div style="font-weight: 600; font-size: 1.3em; margin-bottom: 20px; color: #3498db;">
      üéì Technical Deep Dive: Human-AI Complementary Intelligence
    </div>

    <div style="line-height: 1.8; color: #495057;">
      <h3 style="color: #2c3e50; margin-top: 20px;">Why Collaboration Outperforms Individual Approaches</h3>
      <p>
        This demo shows a critical insight: <strong>AI and clinicians make different types of errors</strong>. When errors are uncorrelated, combining predictions yields better performance than either alone. This is the mathematical foundation of <strong>ensemble methods</strong> in machine learning.
      </p>

      <h3 style="color: #2c3e50; margin-top: 25px;">Performance Breakdown</h3>
      <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 15px 0;">
        <table style="width: 100%; border-collapse: collapse;">
          <tr style="border-bottom: 2px solid #dee2e6;">
            <th style="text-align: left; padding: 10px;">Mode</th>
            <th style="text-align: center; padding: 10px;">Accuracy</th>
            <th style="text-align: center; padding: 10px;">Sensitivity</th>
            <th style="text-align: center; padding: 10px;">Specificity</th>
            <th style="text-align: left; padding: 10px;">Key Strength</th>
          </tr>
          <tr>
            <td style="padding: 10px;"><strong>AI Only</strong></td>
            <td style="text-align: center; padding: 10px;">80%</td>
            <td style="text-align: center; padding: 10px;">75%</td>
            <td style="text-align: center; padding: 10px;">84%</td>
            <td style="padding: 10px;">Pattern detection in video data</td>
          </tr>
          <tr style="background: #f8f9fa;">
            <td style="padding: 10px;"><strong>Clinician Only</strong></td>
            <td style="text-align: center; padding: 10px;">82%</td>
            <td style="text-align: center; padding: 10px;">75%</td>
            <td style="text-align: center; padding: 10px;">88%</td>
            <td style="padding: 10px;">Contextual knowledge & history</td>
          </tr>
          <tr>
            <td style="padding: 10px;"><strong>Hybrid (AI + Clinician)</strong></td>
            <td style="text-align: center; padding: 10px;"><strong style="color: #28a745;">92%</strong></td>
            <td style="text-align: center; padding: 10px;"><strong style="color: #28a745;">92%</strong></td>
            <td style="text-align: center; padding: 10px;"><strong style="color: #28a745;">91%</strong></td>
            <td style="padding: 10px;">Catches cases either would miss</td>
          </tr>
        </table>
      </div>

      <h3 style="color: #2c3e50; margin-top: 25px;">What AI Catches That Clinicians Miss</h3>
      <ul style="padding-left: 25px;">
        <li><strong>Micro-behaviors:</strong> AI detects 0.3-second toe-walking episodes or 23 occurrences of subtle motor patterns that humans can't reliably track in real-time video.</li>
        <li><strong>Quantitative precision:</strong> "Gaze duration: 0.31s vs typical 1.2s" is measurable by AI but hard for humans to estimate accurately without slow-motion replay.</li>
        <li><strong>Consistency across cases:</strong> AI applies the exact same detection criteria to all 60 children, avoiding clinician fatigue or recency bias.</li>
        <li><strong>Subtle patterns:</strong> Prosody analysis (0.23 Hz pitch variation vs 1.1 Hz typical) requires signal processing beyond human auditory perception.</li>
      </ul>

      <h3 style="color: #2c3e50; margin-top: 25px;">What Clinicians Catch That AI Misses</h3>
      <ul style="padding-left: 25px;">
        <li><strong>Contextual knowledge:</strong> Clinicians recognize "regression: lost 15 words between 18-24 months" from parent interviews‚ÄîAI only sees the current video snapshot.</li>
        <li><strong>Differential diagnosis:</strong> Distinguishing ADHD hyperactivity from ASD stereotypy, or anxiety from social avoidance, requires medical training AI doesn't possess.</li>
        <li><strong>Compensatory behaviors:</strong> High-IQ children with autism often mask symptoms through learned social scripts‚Äîclinicians recognize this; video analysis doesn't.</li>
        <li><strong>Multi-source integration:</strong> Clinicians synthesize parent reports, daycare observations, M-CHAT scores, and in-person interaction‚Äîfar beyond video-only data.</li>
      </ul>

      <h3 style="color: #2c3e50; margin-top: 25px;">Types of Cases by Detection Pattern</h3>
      <p><strong>Both detect (4 cases):</strong> Clear presentations where video patterns and clinical criteria align (e.g., C001: obvious gaze aversion + family history + language delay).</p>
      <p><strong>AI-only (3 cases):</strong> Borderline or masked presentations where quantitative video analysis reveals patterns clinicians initially missed in brief assessments.</p>
      <p><strong>Clinician-only (3 cases):</strong> Cases where context is decisive‚Äîregression history, video quality issues, or anxiety mimicking ASD that clinical judgment disambiguates.</p>
      <p><strong>Neither detects (1 case):</strong> True diagnostic uncertainty where both methods are inconclusive, appropriately triggering follow-up assessment.</p>

      <h3 style="color: #2c3e50; margin-top: 25px;">The Math Behind Complementary Errors</h3>
      <p>
        If AI has sensitivity 75% and clinician has sensitivity 75%, but they catch <strong>different</strong> cases, the hybrid sensitivity is:
      </p>
      <p style="background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace; text-align: center;">
        Sensitivity<sub>hybrid</sub> = 1 - (1 - 0.75) √ó (1 - 0.75) = 1 - 0.0625 = <strong>93.75%</strong>
      </p>
      <p>
        This assumes errors are independent (which isn't perfectly true in practice, but this dataset shows low error correlation). The key insight: <strong>union of predictions > individual predictions when errors are uncorrelated</strong>.
      </p>

      <h3 style="color: #2c3e50; margin-top: 25px;">Clinical Workflow Integration</h3>
      <p><strong>Step 1:</strong> AI pre-screens all videos, flagging high-confidence positives and negatives.</p>
      <p><strong>Step 2:</strong> Clinician focuses time on borderline cases (40-60% AI confidence) where human judgment adds most value.</p>
      <p><strong>Step 3:</strong> For high-confidence disagreements (AI says 85% positive, clinician says negative), trigger multi-disciplinary review.</p>
      <p><strong>Result:</strong> Clinician time spent more efficiently, catching edge cases neither would detect alone.</p>

      <h3 style="color: #2c3e50; margin-top: 25px;">Real-World Precedent: Radiology</h3>
      <p>
        Breast cancer screening studies show AI + radiologist combinations detect <strong>5-8% more cancers</strong> than radiologists alone, while <strong>reducing false positives by 20-30%</strong>. The pattern is identical: AI catches subtle micro-calcifications; radiologists catch unusual presentations and integrate patient history. This isn't replacing radiologists‚Äîit's amplifying their capabilities.
      </p>

      <h3 style="color: #2c3e50; margin-top: 25px;">Key Takeaway</h3>
      <p style="background: #e8f5e9; padding: 15px; border-left: 5px solid #28a745; border-radius: 5px;">
        <strong>The goal isn't AI vs humans‚Äîit's AI + humans.</strong> This demo proves that complementary intelligence systems catch cases either approach would miss alone. For autism screening, that 10-15% improvement in detection means hundreds of children get earlier intervention, which dramatically improves long-term outcomes.
      </p>
    </div>
  </div>
</div>

<script>
const casesData = [
  {
    id: 'C001', age: '3y 2m', gender: 'M', actual: true, detected: 'both',
    aiFeatures: [
      { name: 'Gaze aversion', value: 'Detected 0.31s avg gaze duration (typical: 1.2s)', confidence: 94 },
      { name: 'Repetitive behaviors', value: '47 hand-flapping episodes in 10min video', confidence: 91 },
      { name: 'Facial affect', value: 'Limited emotional expression detected (12% of frames)', confidence: 87 }
    ],
    clinicianFeatures: [
      { name: 'Social reciprocity', value: 'Minimal response to name-calling (2/10 attempts)' },
      { name: 'Language delay', value: 'Uses <10 words, no phrase speech at 38 months' },
      { name: 'Family history', value: 'Older sibling diagnosed with ASD' }
    ],
    aiConfidence: 92, clinicianConfidence: 88
  },
  {
    id: 'C002', age: '4y 8m', gender: 'F', actual: false, detected: 'both',
    aiFeatures: [
      { name: 'Gaze patterns', value: 'Normal eye contact duration (1.4s average)', confidence: 88 },
      { name: 'Social engagement', value: 'Responsive to social cues in 85% of interactions', confidence: 90 },
      { name: 'Motor patterns', value: 'No stereotyped movements detected', confidence: 86 }
    ],
    clinicianFeatures: [
      { name: 'Social reciprocity', value: 'Age-appropriate social engagement, takes turns in play' },
      { name: 'Communication', value: 'Uses complex sentences, asks questions appropriately' },
      { name: 'Play behavior', value: 'Engages in pretend play, shares toys with peers' }
    ],
    aiConfidence: 88, clinicianConfidence: 92
  },
  {
    id: 'C003', age: '2y 11m', gender: 'M', actual: true, detected: 'ai-only',
    aiFeatures: [
      { name: 'Micro-behaviors', value: 'Detected subtle toe-walking (0.3s episodes, 23 occurrences)', confidence: 89 },
      { name: 'Visual attention', value: 'Preference for peripheral vision (68% of tracking)', confidence: 85 },
      { name: 'Response latency', value: 'Delayed orienting to sounds (avg 2.8s vs typical 0.7s)', confidence: 82 }
    ],
    clinicianFeatures: [
      { name: 'Borderline presentation', value: 'Subtle signs; clinician initially rated as "monitor"' },
      { name: 'Verbal skills', value: 'Language development appears on track for age' },
      { name: 'Social behaviors', value: 'Some eye contact present, making initial diagnosis unclear' }
    ],
    aiConfidence: 85, clinicianConfidence: 45
  },
  {
    id: 'C004', age: '3y 5m', gender: 'F', actual: true, detected: 'human-only',
    aiFeatures: [
      { name: 'Masking behaviors', value: 'Gaze metrics within normal range during structured tasks', confidence: 52 },
      { name: 'Social mimicry', value: 'Compensatory behaviors reduced AI detection confidence', confidence: 48 },
      { name: 'Model limitation', value: 'Video-based model missed contextual social deficits', confidence: 41 }
    ],
    clinicianFeatures: [
      { name: 'Clinical context', value: 'Regression: Lost 15 words between 18-24 months' },
      { name: 'Parent report', value: 'Marked social withdrawal noted by family, not captured in clinical video' },
      { name: 'Diagnostic expertise', value: 'Pattern recognition from 15+ years experience with subtle presentations' }
    ],
    aiConfidence: 47, clinicianConfidence: 82
  },
  {
    id: 'C005', age: '4y 1m', gender: 'M', actual: true, detected: 'both',
    aiFeatures: [
      { name: 'Restricted interests', value: 'Visual fixation on spinning objects (89% of video time)', confidence: 96 },
      { name: 'Sensory patterns', value: 'Repetitive tactile-seeking behaviors (rubbing surfaces 124 times)', confidence: 93 },
      { name: 'Social disengagement', value: 'No joint attention attempts detected in 10-minute session', confidence: 91 }
    ],
    clinicianFeatures: [
      { name: 'Clear presentation', value: 'Multiple domains affected: social, communication, restricted interests' },
      { name: 'ADOS-2 score', value: 'Exceeded diagnostic cutoff (comparison score: 8, cutoff: 7)' },
      { name: 'Developmental history', value: 'Consistent reports across multiple settings (home, daycare)' }
    ],
    aiConfidence: 94, clinicianConfidence: 95
  },
  {
    id: 'C006', age: '3y 9m', gender: 'M', actual: false, detected: 'human-only',
    aiFeatures: [
      { name: 'False positive triggers', value: 'Shyness interpreted as social avoidance by model', confidence: 68 },
      { name: 'Anxiety behaviors', value: 'Hand-wringing during assessment flagged as stereotypy', confidence: 71 },
      { name: 'Context limitation', value: 'Model lacks ability to differentiate anxiety from ASD', confidence: 65 }
    ],
    clinicianFeatures: [
      { name: 'Situational context', value: 'Child warmed up after 20 minutes, showed typical engagement' },
      { name: 'Differential diagnosis', value: 'Behaviors consistent with separation anxiety, not ASD' },
      { name: 'Developmental milestones', value: 'All communication/social milestones met on time' }
    ],
    aiConfidence: 68, clinicianConfidence: 15
  },
  {
    id: 'C007', age: '2y 8m', gender: 'F', actual: false, detected: 'both',
    aiFeatures: [
      { name: 'Typical behaviors', value: 'Joint attention present in 92% of opportunities', confidence: 90 },
      { name: 'Communication', value: 'Appropriate gesture use and vocal variety detected', confidence: 88 },
      { name: 'Social interest', value: 'Initiated interactions with examiner 14 times', confidence: 86 }
    ],
    clinicianFeatures: [
      { name: 'Social communication', value: 'Strong back-and-forth interaction, shares enjoyment' },
      { name: 'Play skills', value: 'Functional and symbolic play both present' },
      { name: 'Parent concern', value: 'Screened due to family history, but no ASD indicators present' }
    ],
    aiConfidence: 88, clinicianConfidence: 93
  },
  {
    id: 'C008', age: '4y 3m', gender: 'M', actual: true, detected: 'ai-only',
    aiFeatures: [
      { name: 'Prosody analysis', value: 'Monotone speech detected: 0.23 Hz pitch variation (typical: 1.1 Hz)', confidence: 87 },
      { name: 'Facial micro-expressions', value: 'Reduced emotional range: detected only 3/7 basic emotions', confidence: 84 },
      { name: 'Movement dynamics', value: 'Atypical gait pattern: 15¬∞ inward rotation detected', confidence: 81 }
    ],
    clinicianFeatures: [
      { name: 'Verbal abilities', value: 'Strong language skills masked social deficits initially' },
      { name: 'Compensatory strategies', value: 'High IQ led to learned social scripts' },
      { name: 'Brief assessment', value: 'Limited observation time (15min) missed subtle signs' }
    ],
    aiConfidence: 84, clinicianConfidence: 52
  },
  {
    id: 'C009', age: '3y 4m', gender: 'F', actual: false, detected: 'neither',
    aiFeatures: [
      { name: 'Ambiguous signals', value: 'Mixed indicators: some atypical eye contact, but good social interest', confidence: 58 },
      { name: 'Model uncertainty', value: 'Confidence threshold not met (58% vs 75% required)', confidence: 58 },
      { name: 'Video quality', value: 'Suboptimal lighting affected face tracking accuracy', confidence: 51 }
    ],
    clinicianFeatures: [
      { name: 'Borderline case', value: 'Some repetitive behaviors but strong social motivation' },
      { name: 'Diagnostic uncertainty', value: 'Clinician recommended follow-up assessment in 6 months' },
      { name: 'Sensory issues', value: 'Sensory seeking behaviors without other ASD criteria' }
    ],
    aiConfidence: 58, clinicianConfidence: 48
  },
  {
    id: 'C010', age: '2y 10m', gender: 'M', actual: true, detected: 'human-only',
    aiFeatures: [
      { name: 'Video artifacts', value: 'Child moved off-camera frequently, reducing trackable time', confidence: 44 },
      { name: 'Limited data', value: 'Only 4.2 minutes of analyzable video out of 10-minute session', confidence: 39 },
      { name: 'Model gaps', value: 'Insufficient data for reliable prediction (minimum: 7 min)', confidence: 38 }
    ],
    clinicianFeatures: [
      { name: 'Clinical interview', value: 'Parent reports revealed clear regression and repetitive behaviors' },
      { name: 'Direct observation', value: 'In-person assessment captured behaviors not visible on video' },
      { name: 'Multi-source data', value: 'Daycare reports and M-CHAT scores supported diagnosis' }
    ],
    aiConfidence: 40, clinicianConfidence: 87
  },
  {
    id: 'C011', age: '4y 6m', gender: 'M', actual: false, detected: 'ai-only',
    aiFeatures: [
      { name: 'ADHD overlap', value: 'Reduced sustained attention flagged as social disinterest', confidence: 73 },
      { name: 'Hyperactivity patterns', value: 'Frequent movement misclassified as stereotyped behavior', confidence: 70 },
      { name: 'Model confusion', value: 'ADHD symptoms mimic some ASD features in video analysis', confidence: 69 }
    ],
    clinicianFeatures: [
      { name: 'Differential diagnosis', value: 'Recognized ADHD presentation vs ASD' },
      { name: 'Social reciprocity', value: 'When engaged, showed appropriate social responses' },
      { name: 'Diagnostic expertise', value: 'Able to distinguish attention issues from social deficits' }
    ],
    aiConfidence: 71, clinicianConfidence: 22
  },
  {
    id: 'C012', age: '3y 7m', gender: 'F', actual: true, detected: 'both',
    aiFeatures: [
      { name: 'Vocal patterns', value: 'Echolalia detected in 64% of utterances', confidence: 92 },
      { name: 'Social gaze', value: 'Limited eye contact: 0.18s per interaction (typical: 1.5s)', confidence: 89 },
      { name: 'Behavioral rigidity', value: 'Distress when routine altered (5 instances of dysregulation)', confidence: 86 }
    ],
    clinicianFeatures: [
      { name: 'Communication deficits', value: 'Non-functional language, immediate and delayed echolalia' },
      { name: 'Restricted interests', value: 'Intense focus on weather patterns, resists topic changes' },
      { name: 'Sensory issues', value: 'Covers ears frequently, seeks deep pressure' }
    ],
    aiConfidence: 89, clinicianConfidence: 91
  }
];

let currentMode = 'ai';
let selectedCase = null;

function initCases() {
  const grid = document.getElementById('casesGrid');
  grid.innerHTML = '';
  
  casesData.forEach(caseData => {
    const card = document.createElement('div');
    card.className = 'case-card';
    card.onclick = () => showDetail(caseData);
    
    const isCorrect = evaluateCase(caseData, currentMode);
    card.classList.add(isCorrect ? 'correct' : 'missed');
    
    const detectionType = getDetectionBadge(caseData, currentMode);
    
    card.innerHTML = `
      <div class="case-header">
        <div class="case-id">${caseData.id}</div>
        <div class="case-status ${isCorrect ? 'correct' : 'missed'}">
          ${isCorrect ? '‚úì Correct' : '‚úó Missed'}
        </div>
      </div>
      <div class="case-info">
        Age: ${caseData.age} | ${caseData.gender}<br>
        True: ${caseData.actual ? 'ASD+' : 'ASD-'}<br>
        Detected by: ${detectionType}
      </div>
      <div class="detection-badges">
        ${getDetectionBadgeHTML(caseData)}
      </div>
    `;
    
    grid.appendChild(card);
  });
  
  updateMetrics();
}

function evaluateCase(caseData, mode) {
  if (mode === 'ai') {
    return (caseData.detected === 'ai-only' || caseData.detected === 'both') === caseData.actual;
  } else if (mode === 'human') {
    return (caseData.detected === 'human-only' || caseData.detected === 'both') === caseData.actual;
  } else { // hybrid
    return (caseData.detected === 'ai-only' || caseData.detected === 'human-only' || caseData.detected === 'both') === caseData.actual;
  }
}

function getDetectionBadge(caseData, mode) {
  if (mode === 'ai') {
    return caseData.detected === 'ai-only' || caseData.detected === 'both' ? 'AI' : 'Not detected';
  } else if (mode === 'human') {
    return caseData.detected === 'human-only' || caseData.detected === 'both' ? 'Clinician' : 'Not detected';
  } else {
    if (caseData.detected === 'both') return 'Both';
    if (caseData.detected === 'ai-only') return 'AI';
    if (caseData.detected === 'human-only') return 'Clinician';
    return 'Neither';
  }
}

function getDetectionBadgeHTML(caseData) {
  const badges = {
    'ai-only': '<span class="badge ai">ü§ñ AI Only</span>',
    'human-only': '<span class="badge clinician">üë®‚Äç‚öïÔ∏è Clinician Only</span>',
    'both': '<span class="badge both">ü§ù Both</span>',
    'neither': '<span class="badge neither">Neither</span>'
  };
  return badges[caseData.detected];
}

function updateMetrics() {
  let correct = 0;
  let truePositives = 0;
  let falsePositives = 0;
  let trueNegatives = 0;
  let falseNegatives = 0;
  
  casesData.forEach(caseData => {
    const predicted = getPrediction(caseData, currentMode);
    
    if (predicted === caseData.actual) {
      correct++;
      if (caseData.actual) truePositives++;
      else trueNegatives++;
    } else {
      if (predicted) falsePositives++;
      else falseNegatives++;
    }
  });
  
  const total = casesData.length;
  const missed = total - correct;
  const accuracy = (correct / total * 100).toFixed(0);
  const sensitivity = truePositives / (truePositives + falseNegatives) * 100;
  const specificity = trueNegatives / (trueNegatives + falsePositives) * 100;
  
  document.getElementById('correctCount').textContent = correct;
  document.getElementById('missedCount').textContent = missed;
  document.getElementById('accuracyPercent').textContent = accuracy + '%';
  document.getElementById('sensitivityPercent').textContent = sensitivity.toFixed(0) + '%';
  document.getElementById('specificityPercent').textContent = specificity.toFixed(0) + '%';
}

function getPrediction(caseData, mode) {
  if (mode === 'ai') {
    return caseData.detected === 'ai-only' || caseData.detected === 'both';
  } else if (mode === 'human') {
    return caseData.detected === 'human-only' || caseData.detected === 'both';
  } else { // hybrid
    return caseData.detected !== 'neither';
  }
}

function showDetail(caseData) {
  selectedCase = caseData;
  const panel = document.getElementById('detailPanel');
  const title = document.getElementById('detailTitle');
  const content = document.getElementById('detailContent');
  
  title.textContent = `${caseData.id} - ${caseData.age} ${caseData.gender} | True: ${caseData.actual ? 'ASD+' : 'ASD-'}`;
  
  const aiFeaturesList = caseData.aiFeatures.map(f => `
    <li>
      <strong>${f.name}</strong>
      ${f.value}
      ${f.confidence ? `<div style="margin-top:5px; font-size:0.85em; color:#666;">Confidence: ${f.confidence}%</div>` : ''}
    </li>
  `).join('');
  
  const clinicianFeaturesList = caseData.clinicianFeatures.map(f => `
    <li>
      <strong>${f.name}</strong>
      ${f.value}
    </li>
  `).join('');
  
  content.innerHTML = `
    <div class="detail-grid">
      <div class="detail-section ai">
        <h3>ü§ñ AI Model Analysis</h3>
        <ul class="feature-list">
          ${aiFeaturesList}
        </ul>
        <div class="confidence-score">
          <strong>Overall AI Confidence: ${caseData.aiConfidence}%</strong>
          <div class="confidence-bar">
            <div class="confidence-fill" style="width: ${caseData.aiConfidence}%"></div>
          </div>
        </div>
      </div>
      
      <div class="detail-section clinician">
        <h3>üë®‚Äç‚öïÔ∏è Clinician Assessment</h3>
        <ul class="feature-list">
          ${clinicianFeaturesList}
        </ul>
        <div class="confidence-score">
          <strong>Clinician Confidence: ${caseData.clinicianConfidence}%</strong>
          <div class="confidence-bar">
            <div class="confidence-fill" style="width: ${caseData.clinicianConfidence}%"></div>
          </div>
        </div>
      </div>
    </div>
  `;
  
  panel.classList.add('show');
  panel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  
  // Highlight selected card
  document.querySelectorAll('.case-card').forEach(card => {
    card.classList.remove('selected');
  });
  event.currentTarget.classList.add('selected');
}

function closeDetail() {
  document.getElementById('detailPanel').classList.remove('show');
  document.querySelectorAll('.case-card').forEach(card => {
    card.classList.remove('selected');
  });
}

// Mode selector
document.querySelectorAll('.mode-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentMode = btn.dataset.mode;
    initCases();
    closeDetail();
  });
});

initCases();
</script>

</body>
</html>